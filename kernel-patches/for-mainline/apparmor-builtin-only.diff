---
 security/apparmor/Kconfig |    2 +-
 security/apparmor/lsm.c   |   26 --------------------------
 2 files changed, 1 insertion(+), 27 deletions(-)

--- a/security/apparmor/Kconfig
+++ b/security/apparmor/Kconfig
@@ -1,5 +1,5 @@
 config SECURITY_APPARMOR
-	tristate "AppArmor support"
+	bool "AppArmor support"
 	depends on SECURITY
 	select AUDIT
 	help
--- a/security/apparmor/lsm.c
+++ b/security/apparmor/lsm.c
@@ -931,33 +931,7 @@ createfs_out:
 
 }
 
-static void __exit apparmor_exit(void)
-{
-	/* Remove and release all the profiles on the profile list. */
-	mutex_lock(&aa_interface_lock);
-	aa_profile_ns_list_release();
-
-	/* FIXME: cleanup profiles references on files */
-	free_default_namespace();
-
-	/*
-	 * Delay for an rcu cycle to make sure that all active task
-	 * context readers have finished, and all profiles have been
-	 * freed by their rcu callbacks.
-	 */
-	synchronize_rcu();
-
-	destroy_apparmorfs();
-	mutex_unlock(&aa_interface_lock);
-
-	if (unregister_security(&apparmor_ops))
-		info_message("Unable to properly unregister AppArmor");
-
-	info_message("AppArmor protection removed");
-}
-
 module_init(apparmor_init);
-module_exit(apparmor_exit);
 
 MODULE_DESCRIPTION("AppArmor process confinement");
 MODULE_AUTHOR("Novell/Immunix, http://bugs.opensuse.org");
