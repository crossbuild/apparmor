---
 security/apparmor/apparmor.h |    3 ---
 security/apparmor/inline.h   |   13 -------------
 security/apparmor/list.c     |   25 -------------------------
 3 files changed, 41 deletions(-)

--- a/security/apparmor/apparmor.h
+++ b/security/apparmor/apparmor.h
@@ -218,9 +218,6 @@ extern int aa_change_hat(const char *id,
 extern int aa_change_profile(const char *name, u64 cookie);
 extern struct aa_profile *__aa_find_profile(const char *name,
 					    struct list_head *list);
-extern struct aa_profile *__aa_find_profile2(const char *name,
-					     const char *name2,
-					     struct list_head *list);
 extern struct aa_profile *__aa_replace_profile(struct task_struct *task,
 					       struct aa_profile *profile);
 extern struct aa_task_context *lock_task_and_profiles(struct task_struct *task,
--- a/security/apparmor/inline.h
+++ b/security/apparmor/inline.h
@@ -71,19 +71,6 @@ static inline struct aa_profile *aa_find
 	return profile;
 }
 
-static inline struct aa_profile *aa_find_profile2(const char *name,
-						  const char *name2)
-{
-	struct aa_profile *profile = NULL;
-
-	read_lock(&profile_list_lock);
-	profile = aa_dup_profile(__aa_find_profile2(name, name2,
-						    &profile_list));
-	read_unlock(&profile_list_lock);
-
-	return profile;
-}
-
 static inline struct aa_task_context *aa_alloc_task_context(gfp_t flags)
 {
 	struct aa_task_context *cxt;
--- a/security/apparmor/list.c
+++ b/security/apparmor/list.c
@@ -38,31 +38,6 @@ struct aa_profile *__aa_find_profile(con
 }
 
 /**
- * __aa_find_profile2  -  look up a profile using a name split with //
- * @name: name before //
- * @name2: name after //
- * @head: list to search
- *
- * Returns a pointer to the profile on the list, or NULL if no profile
- * called @name exists. The caller must hold the profile_list_lock.
- */
-struct aa_profile *__aa_find_profile2(const char *name, const char *name2,
-				      struct list_head *head)
-{
-	struct aa_profile *profile;
-	int len = strlen(name);
-
-	list_for_each_entry(profile, head, list) {
-		if (!strncmp(profile->name, name, len) &&
-		    !strncmp(profile->name + len, "//", 2) &&
-		    !strcmp(profile->name + len + 2, name2))
-			return profile;
-	}
-
-	return NULL;
-}
-
-/**
  * aa_profilelist_release - Remove all profiles from profile_list
  */
 void aa_profilelist_release(void)
